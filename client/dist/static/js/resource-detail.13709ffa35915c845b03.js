(window.webpackJsonp=window.webpackJsonp||[]).push([["resource-detail"],{"1+sw":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAABQCAYAAABI1GYUAAAABGdBTUEAALGPC/xhBQAACOFJREFUeAHlm2lsVUUUgHltaSmUgAsgJZBYjY2IS2lpRRaLS6HYBhcKBAgiGEQWFyKISrANamIEWRNFQECMooAQA6KASKwtdoHKYlB2BPxBS1KkQgttn99p3jznTW+ppe/13lcnucycM/fR891z7tw5c+e2aPE/KS4rTrfb7UpKSoqvrq4eQH80RynHr+Hh4QW5ubmnrH7jdF0t0MTExIEAzgW2h2m8y+WqQr8yLCwsKy8v74zZ72TZB7RXr16zgczEYB+9BcDfISEhEwsKCj616HOkyguUkJAwGW8taYiVePjDDh06vLR169aKhvzOjnNrQPFkVyAPc7TSjHADspljN/oIjjT64rV+1dyLdzPw7nGlcGJdAxofH78Q417QDCwLDQ0dkp+fv1PpAHVxQcYhL6YdqfSeupQL8nRhYeHXht4xYojHkscNi2bokNIHiBuQFVyA+xGPGOe3B34T4f9ucnJymNHnCDEkJSWlDZZ006ypbtWqVZ2DDKPtfkbdBMA3aL+RpgvYGRcvXtxJhHQ2+mwXQ0pLSzsaVpzOycm5aOh8RGD/wrtDgX2Zjqs+nS1a9ENfxGPqIUNvqxhSVVWlwlcZUqka9dXALiCUHwTM55mKZzvxmNpGKL9O2zuy1/f/BbLfhGzw3+JellE5jh9u03+MLpTjbQawzb17975R77Oj3WhQMXrPnj0l6enpqXg2E7FadKoAO/jKlStFeDdR6eyo/QIqhmdmZlYTylnADkIsNmC6AZwN7BRD32Si30CVxcBuZ/IfB3Cu0nnqcGAXA7uWR1CU0Rdw0e+gYvHu3bvPRkVFySA13yQAdnhZWVkhwLWSBvNcf8oBARUDd+3aVYl3pzEqP4l4QTca2FiOPGDH6PpAtgMGqoxmVN5IOx7v/qJ0nro1sKuBXUoo63Ns4zT/iAEHFTMZlY8Ryr2BXWGaDewEQjmXx1CM2edPuUlAxWBCuZxQfpbmWIAv6xDAxjHB2MvU0Zxz66c1qt1koMpKvLsasCRgDyudp25HvRHY9wKRGDQ5qEABeyAiIiKB5jqRjfIKicEPffr0kbUqvxVbQMV6SRwAHkbzRQ4zMehbXl5exH37sJzrj2IbqDIe2EW0JeM5rXSeuqMkBoTyLEK90YmB7aACBWweyzEym/rWgBX75uDZb0j7bjL6GiQ6AlQs5nl7nnWnwTRnc5iJwSC8W8Ras6xuXFdxDKhYj0fdeHcO3k1BPKcTEb5dKysrfySU9bUt/ZRrth0FqizFs9+znCM57k9K56lbUi8E9ktG5bZG3zVFR4KKxYzKf7Zt23YAzbkWBBkVFRWFAN9t0WepciyoWCuJAaE8neYTHGZicAehnsdANZa+eoujQZX1wG7ivu0JWJHSSc19G8kgtZLEYHl9iUFQgAqUvAkgMXiA5jKR9QLweGZTP7M2dbuu19tBAypGS2KAdyfgWcljL+kgtO9lbaqQUJb8t1YJKlBlPVnQGmAlMfhd6Tx1O0J5A6E8z0wMghJUoIA9SCjLG4MvDFi5d6cRylsYlVurvqAFFQBCuQzgEcBORbyioDx1Cvq1ShfUoAoC2CVA9UM+pXRS49l0tS7VLEAFCth8FuLk/e1vIqsC7KvSbjagAiOJAVUah54UdJfHTrMCFVgeP8cI42xpq8JjJ67ZgQoc4eqT+TCratMsQfGozwyJZ2txswNllH0Uj0qKp4qblK+oWYEy/esF5GeK0FPvkpSv2YAyC5pIiMogdLMG6ub+nCVymKYMyqZsNjl//vxHGD/SBOBezSLrqXl9GdSgLJZ1B3I9gHdaQTKJyFL6oAUlVEeyWCaelO1D3oIXZUfNOCDlAnhL0IGmpqZGnDt3bj4Ez3sp/m0cYBr4FNuDzA1fwTUFZBH7ViBz6oBcxZaCJCtIuQ5B41GeHOnsiVqNzTeI4aoQquW0pxCqtd69qnOkdjxoRkZG6PHjx9/i0SFZiEs3nvZRHh9DmczvM/S1REeDMuB0PnHihCTP/U3L8eRX3I/PyHY9s89KdiwoU7lkDF7LTKeTYbi8YpxJqL5v6K8pOm5mBJjsC34Nq3eYkHjxDKGaTCrWIEi5Ao7yqOwZxJOfYNdjYpxegNweGRk5Kjs729yVpp9WZ9sxHpUJOQnyXiw1IauBzEpLSxt0vZBC7wiPwjiJUVUmAeFilFZKaI/iftzGoakb3rQVlEXmKPYYLQNyhGk6XsxlVB3OqHrG7Lse2bbQxYt3schcwIBjBbkAfbK/IOXC2OJRIEfjxaX8fe9KuhiDF+WZKBPyDSL7szQpqEzIi4uLFwL5nAXEvpYtWw5lZ+hRi75Gq5oMFC/GMCFfh8U9Tavx5MdATgHSZ+uceV5j5CYB5dk4BC+uwtD2urEAXuaYzCrASl0fiHZAQeXVHaPqOwws8nreLEcYVYcy4Ow3OwIhBwxU9vIxqsqEXF7++BS8uB7I8f91Qu7z4+sUAgIqH/ewl+9zbOpo2HWVuep0QnWhoQ+46NfnKCHq4n58gwR5uwmJF0/zqVd/OyDlKvrNo7JXj5F1DbCpFu75Dv1oQlWmdLYUv3iUBDkJL+61gKwmVN/k45/BpFa2QcqVbbRHgZTX6nM5zAl5MZAjCdUdHPK3bC1hvIC5zMChGxGpC3W1ZS8ev1tO/zDzHO7HHCYAw+X7F7PPLjlEXsBgmP4ZZXR9H80x4PRgL564qRYkunnsFkl2EqRcXBW6h2gnikIKK+AzqGbWCMY/QI7hXvwAtc+EHPmCLFZ5vnMxfmW/GComdOnSRb4b82b2tPtGR0dXxcbG5p48ebJmPwAj6i3oFtEn7zNkO6m3EBHy8c4jZB01L3S8HQ5q1KyTMqCI4eLV23TbAJDND7IyLt7rC6TVF0fL2W46Vbav6b91Wtu7ICyzGR4RWzHQHD3rsvkSHZN4bKyu6wQn6WtCVww6e/bsCUJTtonKA7++kfcQ3h4IpMyAgqL4TBgwfAvTtHuAWMpx2YLgD3QzY2Ji7uN+PGjR71iVN3RNC2U1oKSkJJ77Mpo+KvdhgeMCuM1zg0H+B2qxcAUee2IpAAAAAElFTkSuQmCC"},"8DIk":function(e,t,s){"use strict";var c=s("xGUn");s.n(c).a},AdXu:function(e,t,s){"use strict";var c=s("O9nF");s.n(c).a},DWbO:function(e,t,s){},JZi2:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAABSCAYAAAAM92dlAAAABGdBTUEAALGPC/xhBQAAA7lJREFUeAHtnLtrVEEUhzciaqEg2IiFwUdARRFBLUR0jVpYiH+BuvFRiVZ2Iha2ovHdaUhpI9hYiQoKPhAEtRN8Y6GC4BMfid9Zc2CczCYnm7l3s+Mc+GXmzj135nzzm1ySwKZS+U+jowH3YsZXopkN7rfD8A+KfIweoi+jFTybhCtoMCF9g+UgmoSC0cnoe5QStMtyOUQtR/5awtC6AT0Kr9/j3UPgOi7tVfQIyUPtGFMoeita6BT/lH6Xc105zIXuirT97s027svL+QNStgH69Re2fsPP8uBuedftevmRwuXNriEnvH4CFFyPvCbIzqQSPkudWcFTgTRzZHDzViWSmB1PxEgzRnbcvFWJJGbHEzHSjJEdN29VIonZ8USMNGNkx81blUhidjwRI80Y2XHzViWSmB1PxEgzRnbcvFWJJGbHEzHSjJEdN29VIonZ8USMNGNkx81blUhidjwRI80Y2XHzViWSmB1PxEgzRnbcvFWJJGbHEzHSjJEdN29VIonZ8USMNGO0yvFtVHgPyccl5pqrjZg4OeJc1qm2k9iHZNNXoRWoip6j0qJsx3dA1ofcdTu5vonmodLCLaDoRQX6IgqtKcf9BioNPlQE60ePnczoQw96q5QKXwa4QF9A7lrfud6CziM3SoWXhU8icUC1RwYjRI05fiOdV1r55N9mJCGfhTmH3PvSf4HmoxhxnUnc+Ve7kxYBXmMBH/orYwqt6wv8WeQWJ/2XKAZ8qeA1ig5Bb2K8URQFXxp4D2RjhdbNOEMntvOlgI8HejT4BZowxrZw8F0UFHJ64xgLlfSQ868Ybwa+UHCBHkDuMZUXWTPQPFaP03x155N+M/CFgRcB/Re9UokBXwj4bioMOd2tlUdoTzFHyPn6h2MN80cHD0HL/2KICa1c44GPCi4/2flOFwWt8P4PWXIKXqPRnI8G3gh6g1ZYYNsMfBTwVkLrfjaC79IErx03+F4mDB3vMpz2WCq9DMhRdyXHPgQ/Ivgxb5IDXLvRCLrqJpXcD8G/oQYf/jZj7gYtd+vc5928w/V01IH2o5DTVcZbHScowIWSvsAvGypsKa38Gqw5P+lPG7pXb5bw1Yd7x9gzpA9pK2/vKpooEYL/RXFPkPzBQ+uW9j4aFpcYcZNC/c/krB/2ZOsHjhtqF2PXhUqdweCDESaQExB8MDRZC8aOsqb/S5KaJ+OHRqpJzv8R9BbpQ5/o96M5aKLHGgqU95P8Zy+pX9q7aC0yRyeZon9eBuanW5s4leUXIWlzuDvwB6vBQOwZ06kcAAAAAElFTkSuQmCC"},O9nF:function(e,t,s){},VnyS:function(e,t,s){"use strict";var c=s("aNms"),a=s("NKFe"),n=s.n(a),r=s("ExDf"),o=s("hupZ");var i=[{status:0,desc:"未完成"},{status:1,desc:"已发布"},{status:2,desc:"合约待执行"},{status:3,desc:"发布"}],l={name:"auth-scheme-detail",data:function(){return{curChoice:0,choices:[],selectedPolicy:"",schemes:[],inited:!1,showDialog:!1,currentScheme:{}}},components:{ContractDetail:r.a},props:{selectedCallback:{type:Function},resource:{type:Object}},watch:{resource:function(){this.resource&&this.resource.resourceId&&!this.inited&&(this.init(),this.inited=!0)}},mounted:function(){},methods:{init:function(){var e=this;c.a.onloadSchemesForResource(this.resource.resourceId).then(function(t){t.length&&(e.schemes=e.formatSchemes(t))}).catch(this.$error.showErrorMessage)},changePolicy:function(e,t){this.selectedCallback&&this.selectedCallback(e,t)},formatSchemes:function(e){var t=this;return e=e.filter(function(e,s){return!(!t.resource.isOwner&&o.a.DELETE===e.status)&&(e.dependencies=e.bubbleResources,e.showContracts=e.dutyStatements.length>0,e._contractStatusInfo=i[s],e.policy.forEach(function(e){try{e._fmtSegmentText=n.a.beautify(e.segmentText)}catch(t){e._fmtSegmentText=e.segmentText}}),e)}),this.choices=function(e){e=e||26;for(var t=[],s=0;s<e;s++)t.push(String.fromCharCode(65+s));return t}(e.length).map(function(e,t){return{index:t,label:e}}),e},loadPolicies:function(){return this.$services.authSchemes.get({params:{resourceIds:this.resource.resourceId}}).then(function(e){if(0===e.data.errcode)return e.getData();throw new Error(e)})},gotoResourceSchemeDetailHandler:function(){this.$router.push("/resource/detail/".concat(this.resource.resourceId,"/auth_schemes"))},hideAuthSchemeHandler:function(){this.$emit("close")},updateContractHandler:function(e){for(var t=this.currentScheme.dutyStatements,s=0;s<t.length;s++)if(t[s].contractId===e.contractId){Object.assign(t[s],e);break}},showContractsHandler:function(e){this.currentScheme=e,this.showDialog=!0},expandChangeHandler:function(e,t){t.length>0&&!e.inited&&(e.inited=!0)},expandRowHandler:function(e){this.$refs.contractsTable.toggleRowExpansion(e)}}},u=(s("a2pS"),s("8DIk"),s("KHd+")),d=Object(u.a)(l,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"auth-scheme-detail-container"},[s("h3",{staticClass:"nav-title"},[e._v("授权方案"),e.resource.isOwner?s("i",{staticClass:"el-icon-edit",on:{click:e.gotoResourceSchemeDetailHandler}}):e._e(),e._v(" "),e.resource.isOwner?e._e():s("el-button",{staticClass:"hide-btn",attrs:{type:"text"},on:{click:e.hideAuthSchemeHandler}},[s("i",{staticClass:"el-icon-close"})])],1),e._v(" "),s("div",{staticClass:"auth-scheme-content"},[s("div",{staticClass:"tabs-header"},[s("el-radio-group",{staticClass:"tab-radio-group",model:{value:e.curChoice,callback:function(t){e.curChoice=t},expression:"curChoice"}},e._l(e.choices,function(t){return s("el-radio-button",{key:t.index,staticClass:"tab-radio-item",attrs:{label:t.index}},[e._v(e._s(t.label)+"\n        ")])}))],1),e._v(" "),s("div",{staticClass:"tabs-content"},e._l(e.schemes,function(t,c){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.curChoice===c,expression:"curChoice===index"}],staticClass:"tab-panel"},[s("p",{staticClass:"scheme-name"},[e._v(e._s(t.authSchemeName))]),e._v(" "),s("ul",{staticClass:"dep-resources"},e._l(t.dependencies,function(t){return s("li",{staticClass:"dep-item"},[s("div",{staticClass:"resource-name"},[s("p",[s("i",{staticClass:"dot",class:{done:t.done}}),e._v(" "),s("a",{staticStyle:{color:"#333","word-break":"break-all"},attrs:{target:"_blank",href:"/resource/detail/"+t.resourceId}},[e._v(e._s(t.resourceName||t.resourceId))])])])])})),e._v(" "),t.policy?s("div",{staticClass:"policy-options"},[s("h3",{staticStyle:{"margin-bottom":"15px",color:"#333333"}},[e._v("授权策略")]),e._v(" "),s("div",{staticClass:"policy-content"},[s("el-collapse",e._l(t.policy,function(t,c){return s("el-collapse-item",{key:c,attrs:{title:t.policyName,name:c}},[s("pre",{staticClass:"policy-segment-text"},[e._v(e._s(t._fmtSegmentText))])])}))],1)]):e._e(),e._v(" "),e.resource.isOwner&&t.showContracts?s("div",{staticClass:"scheme-contract-status-wrap"},[s("div",{staticClass:"contract-status-btn-wrap"},[s("el-button",{staticClass:"scheme-contract-status-btn",class:["contract-status-"+t._contractStatusInfo.status+"-btn"],on:{click:function(s){e.showContractsHandler(t)}}},[e._v("\n              资源合同详情\n            ")])],1)]):e._e()])}))]),e._v(" "),s("el-dialog",{attrs:{width:"800px",title:e.currentScheme.authSchemeName+"-依赖资源合同列表","append-to-body":!0,visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[s("div",{staticClass:"scheme-dialog-bd"},[s("el-table",{ref:"contractsTable",staticStyle:{width:"100%"},attrs:{data:e.currentScheme.dutyStatements},on:{"expand-change":e.expandChangeHandler}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.inited?[s("contract-detail",{attrs:{contractId:t.row.contractId},on:{update:e.updateContractHandler}})]:void 0}}])}),e._v(" "),s("el-table-column",{attrs:{label:"资源名称",prop:"resourceName"}}),e._v(" "),s("el-table-column",{attrs:{label:"资源合同ID",prop:"contractId"}}),e._v(" "),s("el-table-column",{attrs:{label:"授权方案ID",prop:"authSchemeId"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){e.expandRowHandler(t.row,t.$index)}}},[e._v("查看合同")])]}}])})],1)],1)])],1)},[],!1,null,"a1c909ee",null);t.a=d.exports},Wt6E:function(e,t,s){"use strict";s.r(t);var c=s("L2JU"),a=s("VnyS"),n=s("59r6"),r=s("tpTV"),o={name:"resource-detail",data:function(){return{resourceId:this.$route.params.resourceId,resourceDetail:{resourceInfo:{},isFavor:!1},showAuthSchemes:!1,showOptionsDialog:!1,selectedNode:"",nodes:[],contentTransform:"none",selectedPolicy:{}}},computed:Object.assign({isOwnerResource:function(){return this.resourceDetail.resourceInfo.isOwner}},Object(c.b)({session:"session"})),components:{AuthSchemeDetail:a.a},mounted:function(){this.init()},methods:{init:function(){var e=this;Object(n.b)(this.resourceId).then(function(t){t._filesize=e.humanizeSize(t.systemMeta.fileSize),e.session&&e.session.user?t.isOwner=t.userId===e.session.user.userId:t.isOwner=!1,e.resourceDetail.resourceInfo=t,t.isOwner&&(e.showAuthSchemes=!0)}).catch(function(t){e.$router.push("/")}),this.isFavorResource().then(function(t){e.resourceDetail.isFavor=t}).catch(function(e){console.warn(e)})},isFavorResource:function(){return this.$services.collections.get(this.resourceId).then(function(e){if(0===e.data.errcode)return!!e.data.data;throw new Error(e)})},humanizeSize:function(e){var t=["B","KB","MB","GB","TB"];if(e<1)return e+"B";var s=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1);return(e=Number((e/Math.pow(1024,s)).toPrecision(2)))+t[s]},showAuthSchemeHandler:function(){this.showAuthSchemes=!0,this.transformLeft=Math.min(250,Math.max(this.$refs.detailContent.offsetLeft-20,0)),this.contentTransform="translate(-".concat(this.transformLeft,"px, 0)")},hideAuthSchemeHandler:function(){this.contentTransform="none",this.showAuthSchemes=!1},previewHandler:function(){this.$message.warning("还没开发")},favorResource:function(){var e=this;return this.$services.collections.post({resourceId:this.resourceId}).then(function(t){0===t.data.errcode?(e.$message.success("收藏成功"),e.resourceDetail.isFavor=!0):e.$error.showErrorMessage(t)})},deleteFavorResource:function(){var e=this;return this.$services.collections.delete(this.resourceId).then(function(t){0===t.data.errcode?(e.$message.success("已删除收藏"),e.resourceDetail.isFavor=!1):e.$error.showErrorMessage(t)})},favorHandler:function(){var e=this;this.favoring||(this.favoring=!0,(this.resourceDetail.isFavor?this.deleteFavorResource():this.favorResource()).then(function(){e.favoring=!1}).catch(function(t){e.favoring=!1,e.$error.showErrorMessage(t)}))},loadNodes:function(){return this.nodes.length?Promise.resolve(this.nodes):Promise.all([this.loadResourceOwners(),r.a.onloadNodeList()]).then(function(e){var t=e[0],s=e[1].dataList||[],c={};return t.forEach(function(e){c[e.nodeId]=e}),s.map(function(e){return e.checked=!!c[e.nodeId],e.checked&&(e._presentable=c[e.nodeId],e.selected=!0),e}),s})},loadResourceOwners:function(){return this.$axios.get("/v1/presentables/resourceSubordinateNodes",{params:{resourceId:this.resourceId}}).then(function(e){return e.getData()})},showNodeOptions:function(){var e=this;return new Promise(function(t,s){e.loadNodes().then(function(s){e.nodes=s,e.showOptionsDialog=!0,t(s)}).catch(s)})},getResourceAuthHandler:function(){this.showNodeOptions().catch(this.$error.showErrorMessage)},hideOptionsDialogHandler:function(){this.showOptionsDialog=!1},confirmAuthHandler:function(){var e=this;this.hideOptionsDialogHandler();var t=[];if(this.nodes.forEach(function(e){e.checked&&t.push(e.nodeId)}),t.length){var s=t.map(function(t){return e.createPresentable(t)});Promise.all(s).then(function(t){console.log(t),e.$message.success("获取成功")}).catch(this.$error.showErrorMessage)}},createPresentable:function(e){var t=this.resourceDetail.resourceInfo;return this.$services.presentables.post({nodeId:e,presentableName:t.resourceName,resourceId:t.resourceId}).then(function(e){return 0!==e.data.errcode?Promise.reject(e.data.msg):e.getData()})},selectPolicyHandler:function(e,t){this.selectedPolicy.scheme=e,this.selectedPolicy.policy=t,console.log(this.selectedPolicy)},editDetailHandler:function(){this.$router.push("/resource/edit/".concat(this.resourceId))},nodeOptCheckHandler:function(e){console.log(e),e.checked=!e.checked,this.$forceUpdate()}}},i=(s("AdXu"),s("KHd+")),l=Object(i.a)(o,function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("section",{staticClass:"res-detail-wrap",class:{"owner-resource":e.isOwnerResource}},[c("div",{staticClass:"op-btns"},[e.showAuthSchemes?e._e():c("el-button",{staticClass:"show-btn",attrs:{type:"text"},on:{click:e.showAuthSchemeHandler}},[c("img",{staticClass:"auth-schems-img-icon",attrs:{src:s("aHm8"),alt:"授权方案"}})])],1),e._v(" "),c("div",{staticClass:"res-detail-aside",class:{"active-aside-status":e.showAuthSchemes}},[c("auth-scheme-detail",{directives:[{name:"show",rawName:"v-show",value:e.showAuthSchemes,expression:"showAuthSchemes"}],staticClass:"auth-scheme-detail",attrs:{selectedCallback:e.selectPolicyHandler,resource:e.resourceDetail.resourceInfo},on:{close:e.hideAuthSchemeHandler}})],1),e._v(" "),c("div",{ref:"detailContent",staticClass:"res-detail-content",style:{transform:e.contentTransform}},[c("div",{staticClass:"res-detail-hd clearfix"},[e._m(0),e._v(" "),c("div",{staticClass:"res-digest"},[c("div",{staticClass:"res-title"},[e._v(e._s(e.resourceDetail.resourceInfo.resourceName))]),e._v(" "),c("div",{staticClass:"res-origin-info"},[c("span",{staticClass:"res-type"},[e._v(e._s(e.resourceDetail.resourceInfo.resourceType))]),e._v(" "),c("span",{staticClass:"res-author-name"},[e._v("by: "+e._s(e.resourceDetail.resourceInfo.userName))]),e._v(" "),c("span",{staticClass:"res-update-time"},[e._v("最近更新时间： "+e._s(e._f("fmtDate")(e.resourceDetail.resourceInfo.updateDate)))])]),e._v(" "),c("div",{staticClass:"res-type-info"})])]),e._v(" "),c("div",{staticClass:"res-detail-bd"},[c("div",{staticClass:"res-detail-desc",domProps:{innerHTML:e._s(e.resourceDetail.resourceInfo.description)}}),e._v(" "),c("div",{staticClass:"res-detail-meta"},[c("h3",[e._v("meta")]),e._v(" "),c("pre",{staticClass:"meta-info"},[e._v(e._s(JSON.stringify(e.resourceDetail.resourceInfo.meta,null,4)))])])])]),e._v(" "),c("div",{staticClass:"res-detail-ft"},[c("div",{staticClass:"res-detail-ft-content"},[c("el-button",{staticClass:"preview-btn detail-ft-btn",attrs:{type:"text"},on:{click:e.previewHandler}},[c("img",{staticClass:"img-icon",attrs:{src:s("1+sw"),alt:"预览"}}),e._v("预览\n      ")]),e._v(" "),c("el-button",{staticClass:"favor-btn detail-ft-btn",attrs:{type:"text"},on:{click:e.favorHandler}},[c("img",{staticClass:"img-icon",attrs:{src:s("JZi2"),alt:"收藏"}}),e._v(e._s(e.resourceDetail.isFavor?"已收藏":"收藏至我的资源库")+"\n      ")]),e._v(" "),c("el-button",{staticClass:"edit-btn detail-ft-btn",attrs:{type:"text"},on:{click:e.editDetailHandler}},[c("i",{staticClass:"el-icon-edit",staticStyle:{"padding-right":"12px"}}),e._v("编辑\n      ")]),e._v(" "),c("el-button",{staticClass:"auth-btn",attrs:{circle:""},on:{click:e.getResourceAuthHandler}},[e._v("获取授权")])],1)]),e._v(" "),c("el-dialog",{attrs:{width:"640px",title:"",visible:e.showOptionsDialog},on:{"update:visible":function(t){e.showOptionsDialog=t}}},[c("div",{staticClass:"opts-content-wrap"},[c("div",{staticClass:"select-target-header"},[c("div",{staticClass:"resource-name"},[e._v(e._s(e.resourceDetail.resourceInfo.resourceName))]),e._v(" "),c("div",{staticClass:"selected-resource-auth-scheme-policy"})]),e._v(" "),c("div",{staticClass:"select-target-bd"},[c("h4",{staticClass:"opts-bd-title"},[e._v("获取资源授权至节点：")]),e._v(" "),c("div",{staticClass:"opts-container"},[c("ul",{staticClass:"checkbox-group node-opts"},e._l(e.nodes,function(t){return c("li",{staticClass:"checkbox-item",class:{"node-opt-selected":t.selected},on:{click:function(s){e.nodeOptCheckHandler(t)}}},[t.checked?c("i",{staticClass:"node-opt-check-status checked-opt"}):c("i",{staticClass:"node-opt-check-status unchecked-opt"}),e._v("\n              "+e._s(t.nodeName)+"\n            ")])}))])]),e._v(" "),c("div",{staticClass:"dialog-footer"},[c("el-button",{staticClass:"deep-color-btn",attrs:{type:"primary"},on:{click:e.confirmAuthHandler}},[e._v("确 定")])],1)])])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"res-author-avatar"},[t("img",{attrs:{src:"//freelog-image.oss-cn-shenzhen.aliyuncs.com/preview/e9bb1c2d-33ce-4a65-93c1-87c88abb4188.jpg",alt:""}})])}],!1,null,"9ffd6ecc",null);t.default=l.exports},a2pS:function(e,t,s){"use strict";var c=s("DWbO");s.n(c).a},aHm8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAAwJJREFUeAHt21FKQ0EMhWEVd9RFdU3dU++aFAr1MTAJh5zE3xeFuZNJzse83NbP5/P588HP2gS+1k7GYK8Evt853G6395/8XpDAdV2vKbjBCzCjEQCO0lmwBvACxGgEgKN0FqwBvAAxGgHgKJ0FawAvQIxGADhKZ8EawAsQoxEAjtJZsAbwAsRoBICjdBasAbwAMRoB4CidBWsAL0CMRgA4SmfBGsALEKMRAI7SWbAG8ALEaASAo3QWrAG8ADEaAeAonQVrAC9AjEb4+1509FBm7X6/Z7b92z2Px0MyOzdYEqtPUYB9LCSdACyJ1acowD4Wkk4AlsTqUxRgHwtJJwBLYvUpCrCPhaQTgCWx+hQF2MdC0gnAklh9isreRaverfpEN6MTbvAMp3SXAKejm7ER4BlO6S4BTkc3YyPAM5zSXQKcjm7GRoBnOKW7BDgd3YyNAM9wSncJcDq6GRsBnuGU7hLgdHQzNgI8wyndJcDp6GZsBHiGU7pL2efB/G/SmYnq83Nu8JnDuKcBHkd21jDAZ3mNexrgcWRnDQN8lte4pwEeR3bWMMBneY17GuBxZGcNA3yW17inAR5HdtYwwGd5jXta9i5a9W51XMLNDXODmwHUxwOsTri5PsDNAOrjAVYn3Fwf4GYA9fEAqxNurg9wM4D6eIDVCTfXB7gZQH08wOqEm+sD3AygPh5gdcLN9QFuBlAfD7A64eb6ADcDqI+XfR48/X+TtnyezQ1WX6Hm+gA3A6iPB1idcHN9gJsB1McDrE64uT7AzQDq4wFWJ9xcH+BmAPXxAKsTbq4PcDOA+niA1Qk315e9i97yLrfZp3w8N7gcoXcBgL19yt0BXI7QuwDA3j7l7gAuR+hdAGBvn3J3AJcj9C4AsLdPuTuAyxF6FwDY26fcHcDlCL0LAOztU+4O4HKE3gUA9vYpdwdwOULvAgB7+5S7A7gcoXcBgL19yt0BXI7QuwDA3j7l7gAuR+hdAGBvn3J3AJcj9C7w973o67q8O6W7VALc4FRsczb9AqsSGCsOljIiAAAAAElFTkSuQmCC"},aNms:function(e,t,s){"use strict";s("snnE");var c=s("LvDl"),a=s("C2Lv"),n={},r={};function o(e){var t=[];return e.resourceIds&&e.resourceIds.length&&(e.resourceIds.forEach(function(e){t.push(e),n[e]||(n[e]=[])}),e.resourceIds=t.join(",")),e.authSchemeIds&&e.authSchemeIds.length&&(e.authSchemeIds=e.authSchemeIds.join(",")),a.a.get("/v1/resources/authSchemes",{params:e}).then(function(s){if(0===s.data.errcode){var a=s.getData();return a.forEach(function(t){r[t.authSchemeId]||(r[t.authSchemeId]=t),e.resourceIds&&n[t.resourceId].push(t)}),t.length&&t.forEach(function(e){n[e]=Object(c.uniqBy)(n[e],"authSchemeId")}),Object(c.cloneDeep)(a)}return Promise.reject(s.data.msg)})}var i=function(e){return o(e)};t.a={onloadSchemesForResource:function(e,t){return(t=t||{}).resourceIds=[e],i(t)},onloadSchemeDetail:function(e){return o({authSchemeIds:[e]}).then(function(e){return Array.isArray(e)&&(e=e[0]),e})},loadAuthSchemes:o}},hupZ:function(e,t,s){"use strict";s.d(t,"b",function(){return c}),s.d(t,"a",function(){return a});var c={NONE:0,SOME:1,ALL:2,UNHANDLE:3},a={INIT:0,PUBLISHED:1,DELETE:4}},xGUn:function(e,t,s){}}]);