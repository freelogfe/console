(window.webpackJsonp=window.webpackJsonp||[]).push([["resource-list"],{"+LUt":function(e,t,n){"use strict";var r=n("0Bse"),s=(n("1O/z"),n("JlKq"));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={name:"resource-items",data:function(){return{search:"",resources:[],loader:null}},props:{type:{type:String,default:function(){return"all"}}},watch:{type:function(){this.initView()}},components:{ResourceItem:r.a,LazyListView:s.a},mounted:function(){this.initView()},methods:{initView:function(){switch(this.type){case"favor":this.loader=this.getFavorResourcesLoader();break;case"self":this.loader=this.getSelfResourcesLoader()}},fetchData:function(e){var t=this;console.log("fetchData",e);return this.loader?this.loader({page:e}).then(function(e){return t.resources=t.resources.concat(e.dataList),e.dataList.length<10&&(e.canLoadMore=!1),e}):Promise.resolve({canLoadMore:!1,dataList:[]})},getSelfResourcesLoader:function(){var e=this;return this.createResourceLoader(function(t){return e.$services.resource.get(t||{}).then(function(e){return e.getData()})})},getFavorResourcesLoader:function(){var e=this;return this.createResourceLoader(function(t){return e.$services.collections.get(t||{}).then(function(e){return e.getData()})})},createResourceLoader:function(e){return function(t){return"object"===i(t=t||{pageSize:10,page:1})&&(t={params:Object.assign({pageSize:10,page:1},t)}),e(t)}},getAllResourcesLoader:function(e){return"object"===i(e={pageSize:100})&&(e={params:e}),this.$services.resource.get(e||{}).then(function(e){return e.getData()})}}},a=(n("0efm"),n("KHd+")),c=Object(a.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"resource-items"},[t("lazy-list-view",{attrs:{list:this.resources,height:90,fetch:this.fetchData},scopedSlots:this._u([{key:"default",fn:function(e){return[t("resource-item",{attrs:{resource:e.data}})]}}])},[t("div",{staticClass:"empty-resource-tip",attrs:{slot:"empty"},slot:"empty"},[this._v("\n      "+this._s("self"===this.type?"没有自制资源":"未收藏资源")+"\n    ")])])],1)},[],!1,null,"428a1981",null);t.a=c.exports},"0Bse":function(e,t,n){"use strict";var r=n("1O/z"),s={name:"resource-info-item",data:function(){return{}},props:{resource:{type:Object,default:function(){return{}}},type:{type:String,default:"list"}},watch:{},mounted:function(){this.format(this.resource)},methods:{format:function(e){var t=this;this.resource.resourceId&&(e._fileSize=this.humanizeSize(e.systemMeta.fileSize),Object(r.c)(e.userId).then(function(n){t.$set(e,"_userInfo",n)}))},humanizeSize:function(e){var t=["B","KB","MB","GB","TB"];if(e<1)return e+"B";var n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1);return(e=Number((e/Math.pow(1024,n)).toPrecision(2)))+t[n]},gotoDetail:function(e){this.$router.push("/resource/detail/".concat(e.resourceId))}}},i=(n("8TdY"),n("KHd+")),o=Object(i.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"resource-item-info",class:["resource-item-theme-type-"+e.type],on:{click:function(t){e.gotoDetail(e.resource)}}},[n("h4",{staticClass:"res-title"},[e._v(e._s(e.resource.resourceName))]),e._v(" "),n("div",{staticClass:"res-intro-detail"},[n("div",{staticClass:"res-intro-bd"},[n("span",{staticClass:"res-type"},[e._v("#"+e._s(e.resource.resourceType))]),e._v(" "),n("span",{staticClass:"res-desc"},[e._v(e._s(e.resource.resourceDesc)+" "+e._s(e.resource.resourceId))])]),e._v(" "),n("div",{staticClass:"res-intro-ft"},[n("span",{staticClass:"res-type"},[e._v("#"+e._s(e.resource.resourceType))]),e._v(" "),e.resource._userInfo?n("span",{staticClass:"res-author"},[e._v("by: "+e._s(e.resource._userInfo.nickname))]):e._e(),e._v(" "),n("span",{staticClass:"update-time"},[e._v("最近更新时间："+e._s(e._f("fmtDate")(e.resource.createDate)))])])])])},[],!1,null,"0f5500ee",null);t.a=o.exports},"0efm":function(e,t,n){"use strict";var r=n("8XOY");n.n(r).a},"6ifa":function(e,t,n){"use strict";n.r(t),n.d(t,"CONTRACT_STATUS",function(){return r}),n.d(t,"CONTRACT_STATUS_TIPS",function(){return s}),n.d(t,"CONTRACT_STATUS_COLORS",function(){return i});var r={uncreated:-1,initial:1,running:2,activated:3,userTerminated:4,sysTerminated:5,terminated:6},s={"-1":"未创建合同",1:"未开始执行",2:"执行中",3:"生效中",4:"用户终止",5:"系统终止",6:"合同已终止"},i={"-1":{type:"danger",desc:"未创建合同"},1:{type:"warning",desc:"未开始执行"},2:{type:"warning",desc:"执行中"},3:{type:"success",desc:"生效中"},4:{type:"info",desc:"用户终止"},5:{type:"info",desc:"系统终止"},6:{type:"info",desc:"合同已终止"}}},"8SHQ":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"PRESENTABLE_STATUS_TIPS",function(){return o});var s=n("6ifa"),i=n("mL9P"),o=[{text:"测试状态",type:"info"},{text:"未开始执行",type:"danger"},{text:"执行中",type:"danger"},{text:"生效中",type:"success"},{text:"用户终止",type:"info"},{text:"系统终止",type:"info"}],a=n("DAk/");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}({},s,i,r,a)},"8TdY":function(e,t,n){"use strict";var r=n("t2JG");n.n(r).a},"8XOY":function(e,t,n){},AFzW:function(e,t,n){"use strict";var r=n("Zopt");n.n(r).a},"DAk/":function(e,t,n){"use strict";n.r(t),n.d(t,"USER_GROUP_TYPE",function(){return r}),n.d(t,"NODE_GROUP_TYPE",function(){return s}),n.d(t,"GROUP_TYPES",function(){return i});var r=1,s=2,i=[{value:r,label:"用户分组"},{value:s,label:"节点分组"}]},IjTe:function(e,t,n){"use strict";var r=n("czYm");n.n(r).a},JlKq:function(e,t,n){"use strict";var r={name:"fl-lazy-list-view",props:{list:{type:Array,required:!0,default:[],twoWays:!0},height:{type:Number,default:44},fetch:{type:Function}},data:function(){return{lastScrollTop:null,distance:this.height,lineTopHeight:0,lineBottomHeight:0,previewList:[],displayCount:0,canLoadMore:!0,index:1}},mounted:function(){this.initView(),this.$on("reload",this.refresh.bind(this))},beforeDestroy:function(){this.disconnect()},methods:{initView:function(){var e=this;e.$refs.loading.classList.remove("hide"),e.observer=new IntersectionObserver(function(t){t.forEach(function(t){t.intersectionRatio<=0||!1!==e.canLoadMore&&e.load().catch(function(){e.observer.unobserve(e.$refs.loading),e.$refs.loading.classList.add("hide")})})},{rootMargin:"50px 0px"}),e.observer.observe(this.$refs.loading)},load:function(){var e=this;return e.fetch(e.index++).then(function(t){if(e.canLoadMore=t.canLoadMore,e.scrollHandler(t.dataList||[]),!1===e.canLoadMore)return Promise.reject()})},disconnect:function(){this.observer&&this.observer.disconnect()},refresh:function(){this.canLoadMore=!0,this.previewList=[],this.index=1,this.disconnect(),this.initView()},scrollHandler:function(e){this.previewList=this.previewList.concat(e)}},components:{}},s=(n("U1Xs"),n("KHd+")),i=Object(s.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"listView",staticClass:"fl-lazy-list-view"},[e.previewList.length?n("ul",{style:{paddingTop:e.lineTopHeight+"px",paddingBottom:e.lineBottomHeight+"px"}},e._l(e.previewList,function(t,r){return n("li",{key:r,style:{height:e.height+"px"}},[e._t("default",null,{data:t})],2)})):e._e(),e._v(" "),0===e.previewList.length?e._t("empty"):e._e(),e._v(" "),e._t("loading",[n("div",{ref:"loading",staticClass:"load-more-gif"},[e._v("loading...")])])],2)},[],!1,null,"94b4b6d8",null);t.a=i.exports},U1Xs:function(e,t,n){"use strict";var r=n("iB2p");n.n(r).a},YmH8:function(e,t,n){"use strict";var r={name:"freelog-search-input",data:function(){return{input:"",showInput:!1}},props:{width:{type:String,default:function(){return"300px"}}},mounted:function(){},methods:{showInputHandler:function(){var e=this;this.showInput=!0,this.$nextTick(function(){e.$refs.input.focus()})},hideInputHandler:function(){this.showInput=!1},searchHandler:function(){this.showInput=!0,this.$emit("search",this.input)}}},s=(n("IjTe"),n("KHd+")),i=Object(s.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fl-search-input-wrap"},[e.showInput?n("el-input",{ref:"input",staticClass:"search-input",style:{width:e.width},attrs:{size:"small",placeholder:"按回车进行搜索"},on:{blur:e.hideInputHandler},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchHandler(t):null}},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]):n("el-button",{attrs:{type:"text"},on:{click:e.showInputHandler}},[n("i",{staticClass:"el-icon-search"})])],1)},[],!1,null,"1b39b03c",null);t.a=i.exports},Zopt:function(e,t,n){},czYm:function(e,t,n){},iB2p:function(e,t,n){},ivhp:function(e,t,n){"use strict";n.r(t);var r=n("YmH8"),s=n("8SHQ"),i=n("+LUt"),o=s.a.RESOURCE_STATUS,a={name:"resource-list",data:function(){return{resourceList:[],curTabName:"self",RESOURCE_STATUS:o}},components:{ResourceItems:i.a,SearchInput:r.a},mounted:function(){},methods:{handleEdit:function(e){this.$router.push({path:"/resource/detail/".concat(e.resourceId)})},editAuthNode:function(e){this.$router.push({path:"/resource/detail/".concat(e.resourceId,"/auth_schemes")})},searchHandler:function(e){this.$message.warning("未开发")}}},c=(n("AFzW"),n("KHd+")),u=Object(c.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"my-resources"},[n("h3",{staticClass:"title"},[e._v("我的资源库")]),e._v(" "),n("div",{staticClass:"body-content"},[n("el-tabs",{attrs:{"tab-position":"top"},model:{value:e.curTabName,callback:function(t){e.curTabName=t},expression:"curTabName"}},[n("el-tab-pane",{attrs:{label:"自制资源",name:"self"}},[n("lazy-component",[n("resource-items",{attrs:{type:"self"}})],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"收藏资源",name:"favor"}},[n("lazy-component",[n("resource-items",{attrs:{type:"favor"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"right-tool-bar-wrap"},[n("ul",{staticClass:"tool-bars"},[n("li",{staticClass:"tool-item"},[n("search-input",{on:{search:e.searchHandler}})],1)])])],1)])},[],!1,null,"072666eb",null);t.default=u.exports},mL9P:function(e,t,n){"use strict";n.r(t),n.d(t,"RESOURCE_TYPES",function(){return r}),n.d(t,"RESOURCE_STATUS",function(){return s});var r={widget:"widget",image:"image",audio:"audio",markdown:"markdown",pageBuild:"page_build",revealSlide:"reveal_slide",license:"license"},s=[{desc:"未知状态",type:"danger"},{desc:"未发布",type:"warning"},{desc:"已发布",type:"success"},{desc:"冻结",type:"danger"}]},t2JG:function(e,t,n){}}]);