webpackJsonp([9],{"1G+u":function(e,t,a){"use strict";var n=a("rQCC"),s=a("5b3W"),r=a.n(s);var i=function(e){a("OMds")},o=a("VU/8")(n.a,r.a,!1,i,"data-v-361849fa",null);t.a=o.exports},"370x":function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("section",[n("el-table",{staticClass:"resource-list",attrs:{data:a.pagebuildList,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"presentableName",label:"presentable名称"}}),a._v(" "),n("el-table-column",{attrs:{prop:"resourceDetail.resourceName",label:"资源名称"}}),a._v(" "),n("el-table-column",{attrs:{prop:"presentableId",width:"220px",label:"presentableId(for test)"}}),a._v(" "),n("el-table-column",{attrs:{prop:"resourceId",width:"350px",label:"资源id(for test)"}}),a._v(" "),n("el-table-column",{attrs:{width:"120px",label:"创建时间"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n        "+a._s(a._f("fmtDate")(e.row.createDate))+"\n      ")]}}])}),a._v(" "),n("el-table-column",{attrs:{label:"资源链接（for test）"},scopedSlots:a._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.resourceDetail.resourceUrl,target:"_blank"}},[a._v("资源链接")])]}}])}),a._v(" "),n("el-table-column",{attrs:{width:"100px",label:"展示状态"},scopedSlots:a._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.statusInfo.type}},[a._v(a._s(e.row.statusInfo.desc))])]}}])}),a._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},on:{click:function(e){a.handlePreview(t.row)}}},[a._v("查看详情\n        ")]),a._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.row.status,expression:"scope.row.status==2"}],attrs:{size:"small",type:"primary"},on:{click:function(e){a.setDefaultPageBuildHandler(t.row)}}},[a._v("设为展示\n        ")]),a._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.status,expression:"scope.row.status==1"}],attrs:{size:"small",type:"warning"},on:{click:function(e){a.setDefaultPageBuildHandler(t.row,2)}}},[a._v("设为隐藏\n        ")])]}}])})],1)],1)},staticRenderFns:[]}},"5b3W":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-view-wrapper"},[a("el-table",{staticClass:"table",attrs:{data:e.tableData,stripe:"",border:""}},[e._t("default")],2),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.showPagination,expression:"showPagination"}],staticClass:"pagination",attrs:{background:!0,"current-page":e.pageMeta.page,"page-sizes":[10,20,30,50],"page-size":e.pageMeta.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]}},OMds:function(e,t,a){var n=a("rUtK");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("743cdafe",n,!0,{})},PG49:function(e,t,a){"use strict";var n=a("woOf"),s=a.n(n),r=a("kEHT");t.a={name:"table-view",data:function(){return{loading:!1,tableData:[],total:0}},props:{data:{type:Array,default:function(){return[]}},showPagination:{type:Boolean,default:!0},formatHandler:{type:Function,default:null},paginationOptions:{type:Object,default:function(){return{pageSizes:[10,20,30,50]}}},loader:Function,pageMeta:{type:Object,default:function(){var e=r.c.get("PAGE_"+this.$route.fullPath+"_index")||{};return s()({pageSize:10,page:1},e)}}},beforeDestroy:function(){this.pageMeta&&this.pageMeta.keyWords&&delete this.pageMeta.keyWords,r.c.set("PAGE_"+this.pageUrl+"_index",this.pageMeta)},mounted:function(){this.pageUrl=this.$route.fullPath,this.tableData=this.data,this.total=this.tableData.length,this.load(),this.$on("reload",this.reload.bind(this))},methods:{reload:function(e){this.load(e)},load:function(e){var n=this;s()(this.pageMeta,e||{}),this.loader&&(this.loading=!0,this.loader(this.pageMeta).then(function(e){var t=e.getData();if(n.loading=!1,t){var a=t.dataList||t;n.formatHandler&&(a=n.formatHandler(a)),n.tableData=a,t.dataList?(n.total=t.totalItem,n.pageMeta.page=t.page||1):n.total=a.length}else n.$message.error(t.msg)}).catch(function(e){n.$message.warning("加载失败"),n.loading=!1}))},handleSizeChange:function(e){var t={pageSize:e};this.load(t),this.$emit("sizeChange",t)},handleCurrentChange:function(e){var t={page:e};this.load(t),this.$emit("pageChange",t)}}}},WJxV:function(e,t,a){"use strict";var n=a("jWBi");t.a=n.a},aBvM:function(e,t,a){var n=a("vMBY");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("8beccb1e",n,!0,{})},jWBi:function(e,t,a){"use strict";var n=a("//Fk"),s=a.n(n),r=(a("1G+u"),{show:1,hide:2});t.a={name:"node-page-build-list",data:function(){return{pagebuildList:[],PAGE_BUILD_STATUS:r}},mounted:function(){var t=this;this.loader().then(this.format.bind(this)).then(function(e){t.pagebuildList=e})},methods:{loader:function(){var n=this,e={nodeId:this.$route.params.nodeId};return this.$services.pagebuild.get({params:e}).then(function(t){var e=t.getData(),a=[];return e.forEach(function(t){var e=n.$services.resource.get(t.resourceId).then(function(e){return t.resourceDetail=e.getData(),e});a.push(e)}),s.a.all(a).then(function(e){return t.getData()})})},format:function(e){return e.forEach(function(e){e.statusInfo=e.status===r.show?{desc:"默认展示",type:"success"}:{desc:"不展示",type:"info"}}),e},updateStatus:function(){this.pagebuildList.forEach(function(e){e.status=r.hide})},setDefaultPageBuildHandler:function(e,t){t=t||r.show;var a={nodeId:parseInt(this.$route.params.nodeId),status:t};this.changePageBuildShowStatus(e,a)},changePageBuildShowStatus:function(t,a){var n=this;this.$services.pagebuild.put(t.id,a).then(function(e){if(0!==e.data.errcode)throw new Error(e.data.msg);a.status===r.show&&n.updateStatus(),t.status=a.status,n.format(n.pagebuildList),n.$message.success("设置成功")}).catch(this.$error.showErrorMessage)},handlePreview:function(e){this.$router.push({path:"/node/"+this.$route.params.nodeId+"/presentable/detail",query:{presentableId:e.presentableId,ispb:!0}})}}}},rQCC:function(e,t,a){"use strict";var n=a("PG49");t.a=n.a},rUtK:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,".table-view-wrapper .table[data-v-361849fa]{max-height:100%}.table-view-wrapper .pagination[data-v-361849fa]{margin-top:15px;text-align:center}","",{version:3,sources:["/Users/daizecheng/workplace/freelog/console.freelog.com/client/src/components/TableView/index.vue"],names:[],mappings:"AACA,4CACE,eAAiB,CAClB,AACD,iDACE,gBAAiB,AACjB,iBAAmB,CACpB",file:"index.vue",sourcesContent:["\n.table-view-wrapper .table[data-v-361849fa] {\n  max-height: 100%;\n}\n.table-view-wrapper .pagination[data-v-361849fa] {\n  margin-top: 15px;\n  text-align: center;\n}\n"],sourceRoot:""}])},rbfI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("WJxV"),s=a("370x"),r=a.n(s);var i=function(e){a("aBvM")},o=a("VU/8")(n.a,r.a,!1,i,"data-v-619c2905",null);t.default=o.exports},vMBY:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,".resource-list[data-v-619c2905]{width:100%;min-height:600px}","",{version:3,sources:["/Users/daizecheng/workplace/freelog/console.freelog.com/client/src/views/node/page-build/list/index.vue"],names:[],mappings:"AACA,gCACE,WAAY,AACZ,gBAAkB,CACnB",file:"index.vue",sourcesContent:["\n.resource-list[data-v-619c2905] {\n  width: 100%;\n  min-height: 600px;\n}\n"],sourceRoot:""}])}});