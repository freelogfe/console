<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script>
//        document.domain = 'demo.com'
        window.jsonpCallback = function (res) {
            console.log(res)
        }

    </script>
</head>
<body>
a.demo.com
<script>
    window.onload = function () {
        window.fetch('//b.demo.com/api/test')
            .then(function (res) {
                console.log(res)
                return res.json()
            })
            .then(function (data) {
                console.log(data)
            })

            .then(function () {
//                window.fetch('//b.demo.com/api/Atest', {
//                    credentials: 'include'
//                }).then(function (res) {
//                    console.log(res)
//                    return res.json()
//                }).then(function (data) {
//                    console.log(data)
//                })
                window.fetch('/api/Atest', {
                    credentials: 'include'
                }).then(function (res) {
                    console.log(res)
                    return res.json()
                }).then(function (data) {
                    console.log(data)
                })
            })
    }
</script>
</body>
</html>
